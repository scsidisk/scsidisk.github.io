<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="scsidisk" />
    <title>隐藏apache和php的版本信息 | scsidisk</title>
    <link href="/feed/" rel="alternate" title="scsidisk" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/highlight.css">
    <link href='/media/webfonts/ss-social.css' rel='stylesheet'>
    <link href='/media/webfonts/ss-standard.css' rel='stylesheet'>
    <link href="/media/css/screen.css" rel="stylesheet">

    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <div class="buttons">
          <a href="/" class="ss-icon" title="Go to homepage">home</a>
          <a href="/categories" class="ss-icon" title="Category" >list</a>
          <a href="/tags" class="ss-icon" title="Tag Cloud" >tags</a>
          <a href="/guestbook" class="ss-icon" title="Guest Book" >talk</a>
          <a href="/about" class="ss-icon" title="About" >user</a>
          <a href="/feed" class="ss-icon" title="Subscribe by RSS" >rss</a>
        </div>
        <h1>隐藏apache和php的版本信息</h1>
        </header>
        <hr>
        <article class="content">
        <section class="post">
<p>web server避免一些不必要的麻烦，可以把apache和php的版本信息不显示</p>

<p>隐藏 Apache 版本信息<br/>
/etc/apache2/apache2.conf 或 /etc/httpd/conf/httpd.conf</p>

<p>ServerTokens ProductOnly<br/>
ServerSignature Off</p>

<p>重启 apache<br/>
现在 http 头里面只看到:<br/>
Server: Apache</p>

<p>隐藏 PHP 版本<br/>
php.ini</p>

<p>expose_php On<br/>
改成<br/>
expose_php Off</p>

<p>重启apache后，php版本在http头中隐藏了。</p>

<p>详解 ：</p>

<p>为了防止某些别有用心的家伙窥视我们的服务器，应该做些什么.</p>

<p>我们来看一下相关的2个参数，分别为ServerTokens和ServerSignature,通过控制这2个阀门应该就能起到一些作用，比如我们可以在配置文件中这么写：<br/>
ServerTokens Prod<br/>
ServerSignature Off</p>

<p>ServerTokens</p>

<p>用于控制服务器是否相应来自客户端的请求，向客户端输出服务器系统类型或内置模块等重要的系统信息。在主配置文件中提供全局控制默认阀值为”Full”(ServerTokens
Full），所以，如果你的Linux发行版本没有更改过这个阀值的话，所有与你的系统有关的敏感信息都会向全世界公开。比如RHEL会将该阀值更改为”ServerTokens
OS”，而Debian依然使用默认的”Full”阀值<br/>
以apache-2.0.55为例，阀值可以设定为以下某项（后面为相对应的Banner
Header)：<br/>
Prod >>> Server: Apache<br/>
Major >>> Server: Apache/2<br/>
Minor >>> Server: Apache/2.0<br/>
Minimal >>> Server: Apache/2.0.55<br/>
OS >>> Server: Apache/2.0.55 (Debian)<br/>
Full (or not specified) default >>> Server: Apache/2.0.55 (Debian)
PHP/5.1.2-1+b1 mod_ssl/2.0.55 OpenSSL/0.9.8b</p>

<p>ServerSignature<br/>
控制由系统生成的页面（错误信息，mod_proxy ftp directory
listing等等）的页脚中如何显示信息。</p>

<p>可在全局设置文件中控制，或是通过.htaccess文件控制<br/>
默认为”off”(ServerSignature
Off),有些Linux发行版本可能会打开这个阀门，比如Debian在默认的虚拟主机上默认将这个阀门设置为开放</p>

<p>全局阀门的阀值会被虚拟主机或目录单位的配置文件中的阀值所覆盖，所以，必须确保这样的事情不应该发生<br/>
可用的阀值为下面所示：<br/>
Off (default): 不输出任何页脚信息
（如同Apache1.2以及更旧版本，用于迷惑）<br/>
On:输出一行关于版本号以及处于运行中的虚拟主机的ServerName
(2.0.44之后的版本，由ServerTokens负责是否输出版本号）<br/>
EMail: 创建一个发送给ServerAdmin的”mailto”</p>

<p>注意＊上述关于如何设置2个阀门从而尽量减少敏感信息泄露的方法，并不会使你的服务器真的更安全，如果你现在使用的版本比较旧，请务必尽快将系统升级，降低被蠕虫攻击的风险。</p>

</section>
<section class="meta">
<span class="author">
  <a href="http://scsidisk.github.io">scsidisk</a>
</span>
<span class="time">
  /
  <time datetime="2010-12-28">2010-12-28</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="/categories/#apache" title="apache">apache</a>&nbsp;
  
</span>


<span class="tags">
  tagged with
  
  <a href="/tags/#Apache" title="Apache">Apache</a>&nbsp;
  
</span>

</section>
<section class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'scsidiskgithuio'; // required: replace example with your forum shortname
    var disqus_url = 'http://scsidisk.github.io/2010/12/version_information_hiding_apache_and_php/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://scsidisk.github.io/2010/12/ubuntucentos_network_setting/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://scsidisk.github.io/2010/12/effective_defense_php_trojan_horse_attack_skills/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


        </article>
      </div>

    <footer>
        <p><small>Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> | Copyright 2008 - 2014 by <a href="http://scsidisk.github.io">scsidisk</a> | <span class="label label-info">2014-06-10 02:55:31 CST</span></small></p>
    </footer>

    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', '');
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
